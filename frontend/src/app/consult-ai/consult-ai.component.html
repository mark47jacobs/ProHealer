<div class="boxx">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@600&display=swap" rel="stylesheet">

    <ng-container>
        <nav class="navbar navbar-transparent fixed-top navbar-expand-lg">
            <div class="container">
                <div class="navbar-translate">
                    <a class="navbar-brand" placement="bottom" [routerLink]="['/home']" target="_blank"
                        tooltip="Random Tip">
                        <span id="heading" style="display:inline-block; border: 2px solid #000;">
                            Consult&nbsp;<span class="ai-part">AI</span>
                        </span>
                    </a>
                    <button aria-controls="navigation-index" aria-label="Toggle navigation"
                        class="navbar-toggler navbar-toggler" [attr.aria-expanded]="!isCollapsed"
                        (click)="isCollapsed = !isCollapsed" id="navigation" type="button">
                        <span class="navbar-toggler-bar bar1"></span>
                        <span class="navbar-toggler-bar bar2"></span>
                        <span class="navbar-toggler-bar bar3"></span>
                    </button>
                </div>
                <div class="navbar-collapse justify-content-end" [collapse]="isCollapsed" id="navigation">
                    <div class="navbar-collapse-header">
                        <div class="row">
                            <div class="col-4 collapse-brand" id="heading"><a>ConsultAI@ProHealer</a></div>
                            <div class="col-6 collapse-close text-right">
                                <button aria-controls="navigation-index" aria-label="Toggle navigation"
                                    class="navbar-toggler" [attr.aria-expanded]="!isCollapsed"
                                    (click)="isCollapsed = !isCollapsed" id="navigation" type="button">
                                    <i class="tim-icons icon-simple-remove" style="color:#00028c"> </i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <div class=" dropdown" dropdown>
                                <button aria-expanded="false" aria-haspopup="true"
                                    class=" btn btn-primary btn-round btn-md dropdown-toggle dropdown-toggle butt"
                                    data-toggle="dropdown" dropdownToggle id="dropdownMenuButton" type="button">
                                    Services
                                </button>
                                <div aria-labelledby="dropdownMenuButton" class=" dropdown-menu" *dropdownMenu>
                                    <a class="dropdown-item" [routerLink]="['/forums']" id="buttons"> Go to
                                        Forums
                                    </a>

                                    <!-- <a class="dropdown-item" [routerLink]="['/chat']" id="buttons"> Go To Chat
                                        Assistant
                                    </a> -->

                                    <a class="dropdown-item" [routerLink]="['/getNearbyDocs']"
                                        id="buttons">Psychiatrists Near Me
                                    </a>
                                </div>
                            </div>
                        </li>

                        <li class="nav-item" *ngIf="!globalUserService.loggedIn">
                            <a id="buttons" class="btn btn-primary btn-round btn-md"
                                (click)="globalUserService.openLoginRegisterComponent()">
                                Login/Signup
                            </a>
                        </li>
                        <li class="nav-item" *ngIf="globalUserService.loggedIn">
                            <a class="btn btn-primary btn-round btn-md butt" style="color:white">
                                Hi, Welcome <a
                                    style="font-size:15px;font-weight:bold">{{globalUserService.username}}</a> |
                                <img style="width:18px;margin:0 15px 0 15px!important"
                                    src="../../../assets/icons-images/down-arrow.svg" [matMenuTriggerFor]="menu">
                                <mat-menu #menu="matMenu" xPosition="before">
                                    <button mat-menu-item (click)="openUserProfile()"> My Profile </button>
                                    <button mat-menu-item (click)="globalUserService.logout()"> Logout </button>
                                </mat-menu>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="wrapper" style="overflow-y:hidden">
            <div class="squares square1"></div>
            <div class="squares square2"></div>
            <div class="squares square3"></div>
            <div class="squares square4"></div>
            <div class="squares square5"></div>
            <div class="squares square6"></div>
            <div class="squares square7"></div>
            <div class="section">
                <!-- <form>
                    <mat-card class="matPhotoCard">
                        <div class="box1">
                            <div (click)="file0.click()" class="flexIt" style="flex: 2;height: 100%;
                        border-radius: 5px;
                        background-color: #E6E7E9;">
                                <div class="t-c" *ngIf="!imgURL[0]">
                                    <img width="50px" style="margin-bottom: 10px;"
                                        src="../../../assets/icons-images/addmore.svg" alt="add more">
                                    <p class="uploadText">Upload Picture</p>
                                </div>
                                <img [src]="imgURL[0]" height="100%" width="100%" *ngIf="imgURL[0]"
                                    style="border-radius: 5px;">
                                <input style="display: none" #file0 type="file" id="file0" accept='image/*'
                                    (change)="preview(file0.files,0)" />
                            </div>
                            <div class="verticalBox" *ngIf="imgURL[0]">
                                <div (click)="file1.click()" class="flexIt" style="height: 49%;
                          border-radius: 5px;
                          background-color: #E6E7E9;">
                                    <div class="t-c" *ngIf="!imgURL[1]">
                                        <img width="30px" src="../../../assets/icons-images/addmore.svg" alt="add more">
                                        <p class="uploadText">Add More</p>
                                    </div>
                                    <img [src]="imgURL[1]" height="100%" width="100%" *ngIf="imgURL[1]"
                                        style="border-radius: 5px;">
                                    <input style="display: none" #file1 type="file" id="file1" accept='image/*'
                                        (change)="preview(file1.files,1)" />
                                </div>

                                <div (click)="file2.click()" class="flexIt" style="height: 49%;
                          border-radius: 5px;
                          background-color: #E6E7E9;">
                                    <div class="t-c" *ngIf="!imgURL[2]">
                                        <img width="30px" src="../../../assets/icons-images/addmore.svg" alt="add more">
                                        <p class="uploadText">Add More</p>
                                    </div>
                                    <img [src]="imgURL[2]" height="100%" width="100%" *ngIf="imgURL[2]"
                                        style="border-radius: 5px;">
                                    <input style="display: none" #file2 type="file" id="file2" accept='image/*'
                                        (change)="preview(file2.files,2)" />
                                </div>
                            </div>
                        </div>
                    </mat-card>
                    <div class="buttonSet" style="margin-bottom:20px;margin-top: 40px;">
                        <button class="btn btn-blue" id="photoBtn" (click)="generateReport()">Generate Report
                            Now</button>
                    </div>
                    <div class="PhotoCard" [hidden]="!generatedReport">
                        <div class="row" *ngIf="generatedReport">
                            <div class="flex-container"
                                style="display: flex; flex-direction: row; justify-content:space-evenly;">
                                <div style="padding: 10px;"><img [src]="imgURL[0]" height="100%" width="100%"
                                        *ngIf="imgURL[0]" style="border-radius: 5px; object-fit: cover;
                                width: 100%;
                                height: 250px;"></div>
                                <div style="padding: 10px;"><img [src]="imgURL[1]" height="100%" width="100%"
                                        *ngIf="imgURL[1]" style="border-radius: 5px; object-fit: cover;
                                width: 100%;
                                height: 250px;"></div>
                                <div style="padding: 10px;"><img [src]="imgURL[2]" height="100%" width="100%"
                                        *ngIf="imgURL[2]" style="border-radius: 5px; object-fit: cover;
                                width: 100%;
                                height: 250px;"></div>
                            </div>
                            <div style="display: flex;
                          justify-content: center;
                          align-items: flex-start; flex-direction: column; font-size: 16px;">
                                <div style="margin: 7px;">
                                    Patient Name : <span
                                        style="font-weight: 600;">{{generatedReport.PatientName}}</span>
                                </div>
                                <div style="margin: 7px;">
                                    Prediction Value : <span
                                        style="font-weight: 600;">{{generatedReport.PredictionValue}}%
                                        Chances</span><br>
                                </div>
                                <div style="margin: 7px;">
                                    Report Created On : <span
                                        style="font-weight: 600;">{{generatedReport.ReportedOn}}</span><br>
                                </div>



                            </div>

                        </div>
                        <button class="btn btn-blue" mat-raised-button id="postArea" style="margin-top: 30px;"
                            (click)="saveReport()">Save Report</button>
                    </div>
                    <div style="height:20px;">
                    </div>
                </form> -->
                <div class="PhotoCard" *ngIf="!result">
                    <div *ngIf="index != 10">
                        <div [hidden]="!takeQuiz">
                            <p class="quiz-question">{{questions[index]}}
                            </p>
                            <button (click)="initiateRecording()" class="btn btn-primary start-recording"
                                *ngIf="!recording && !url">
                                Start
                                Recording
                            </button>
                            <button (click)="stopRecording()" class="btn btn-danger" *ngIf="recording && !url"
                                class="btn btn-primary stop-recording"> Stop
                                Recording
                            </button>
                            <audio class="quiz-audio" controls="" *ngIf="!recording && url">
                                <source [src]="sanitize(url)" type="audio/wav">
                            </audio>
                            <button (click)="sendfile()" class="btn btn-success" *ngIf="!recording && url"
                                class="btn btn-primary goto-next-question">
                                Go To next
                                Question
                            </button>
                        </div>
                        <div [hidden]="takeQuiz">
                            <button class="take-quiz btn btn-primary" (click)="takeQuiz=!takeQuiz">Take Quiz
                                Now!</button>
                        </div>
                    </div>
                    <div *ngIf="index == 10">
                        <button class="btn btn-primary"
                            style="cursor: pointer;background-color: green;color: white;font-size: 1.6rem;"
                            (click)="getResult()"> Finish Test and Get Results

                        </button>
                    </div>
                </div>
                <div class="PhotoCard" *ngIf="result">
                    <h3 style="text-align:center">Results</h3>
                    <table>
                        <tr>
                            <th>Question</th>
                            <th>Your Response</th>
                            <th>Emotion/Mood detected by A.I.</th>
                        </tr>
                        <tr *ngFor="let res of responses;let i = index">
                            <td>{{questions[i]}}</td>
                            <td><audio controls="">
                                    <source [src]="sanitize(res)" type="audio/wav">
                                </audio></td>
                            <td>{{results[i]}}</td>
                        </tr>
                    </table>
                    <p style="display:flex;justify-content: center;align-items: center;"><button class="btn btn-primary"
                            (click)="redirect()">Conclusion : {{final_result}}</button>
                    </p>
                </div>
            </div>
        </div>
    </ng-container>
</div>