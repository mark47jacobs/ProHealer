import { Injectable, Inject, NgModule, Component, defineInjectable, inject } from '@angular/core';
import { checkSystemRequirements, getDevices, createClient, createStream, Logger } from 'agora-rtc-sdk';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function AgoraLocalComponent_i_4_Template(rf, ctx) { if (rf & 1) {
    var _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 8);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); var ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.startCall(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_1_Template(rf, ctx) { if (rf & 1) {
    var _r11 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 11);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_1_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); var ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.leave(); });
    ɵngcc0.ɵɵtext(1, "phone");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_2_Template(rf, ctx) { if (rf & 1) {
    var _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_2_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); var ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_3_Template(rf, ctx) { if (rf & 1) {
    var _r15 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_3_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); var ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_4_Template(rf, ctx) { if (rf & 1) {
    var _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); var ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_5_Template(rf, ctx) { if (rf & 1) {
    var _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_5_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); var ctx_r18 = ɵngcc0.ɵɵnextContext(2); return ctx_r18.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, AgoraLocalComponent_ng_container_5_i_1_Template, 2, 0, "i", 9);
    ɵngcc0.ɵɵtemplate(2, AgoraLocalComponent_ng_container_5_i_2_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(3, AgoraLocalComponent_ng_container_5_i_3_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_ng_container_5_i_4_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_i_5_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    var ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.activeCall);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.videoEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.videoEnabled);
} }
function AgoraLocalComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 13);
} if (rf & 2) {
    var remote_r20 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("id", remote_r20);
} }
var AgoraConfig = /** @class */ (function () {
    function AgoraConfig() {
    }
    return AgoraConfig;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var AngularAgoraRtcService = /** @class */ (function () {
    function AngularAgoraRtcService(config) {
        this.config = config;
        if (!this.checkSystemRequirements()) {
            this.logger('error', 'Web RTC is not supported');
        }
        else {
            this.getDevices();
        }
    }
    /**
     * @return {?}
     */
    AngularAgoraRtcService.prototype.checkSystemRequirements = /**
     * @return {?}
     */
    function () {
        return checkSystemRequirements();
    };
    /**
     * @return {?}
     */
    AngularAgoraRtcService.prototype.getDevices = /**
     * @return {?}
     */
    function () {
        var _this = this;
        getDevices(function (devices) {
            /** @type {?} */
            var audioDevices = devices.filter(function (device) {
                return device.kind === 'audioinput' && device.deviceId !== 'default';
            });
            /** @type {?} */
            var videoDevices = devices.filter(function (device) {
                return device.kind === 'videoinput' && device.deviceId !== 'default';
            });
            _this.audioDevices = audioDevices;
            _this.videoDevices = videoDevices;
        });
    };
    /**
     * @param {?=} mode
     * @return {?}
     */
    AngularAgoraRtcService.prototype.createClient = /**
     * @param {?=} mode
     * @return {?}
     */
    function (mode) {
        if (mode === void 0) { mode = 'interop'; }
        this.client = createClient({ mode: mode });
        this.client.init(this.config.AppID);
    };
    /**
     * @param {?} streamID
     * @param {?} audio
     * @param {?=} cameraId
     * @param {?=} microphoneId
     * @param {?=} video
     * @param {?=} screen
     * @return {?}
     */
    AngularAgoraRtcService.prototype.createStream = /**
     * @param {?} streamID
     * @param {?} audio
     * @param {?=} cameraId
     * @param {?=} microphoneId
     * @param {?=} video
     * @param {?=} screen
     * @return {?}
     */
    function (streamID, audio, cameraId, microphoneId, video, screen) {
        if (cameraId === void 0) { cameraId = this.videoDevices[0].deviceId; }
        if (microphoneId === void 0) { microphoneId = this.audioDevices[0].deviceId; }
        return createStream({ streamID: streamID, audio: audio, cameraId: cameraId, microphoneId: microphoneId, video: video, screen: screen });
    };
    /**
     * @param {?} type
     * @param {?} message
     * @return {?}
     */
    AngularAgoraRtcService.prototype.logger = /**
     * @param {?} type
     * @param {?} message
     * @return {?}
     */
    function (type, message) {
        switch (type) {
            case 'error':
                Logger.error(message);
                break;
            case 'warning':
                Logger.warning(message);
                break;
            case 'info':
                Logger.info(message);
                break;
            case 'debug':
                Logger.debug(message);
                break;
            default:
                Logger.error(message);
        }
    };
    /** @nocollapse */
    AngularAgoraRtcService.ctorParameters = function () { return [
        { type: AgoraConfig, decorators: [{ type: Inject, args: ['config',] }] }
    ]; };
    /** @nocollapse */ AngularAgoraRtcService.ngInjectableDef = defineInjectable({ factory: function AngularAgoraRtcService_Factory() { return new AngularAgoraRtcService(inject("config")); }, token: AngularAgoraRtcService, providedIn: "root" });
AngularAgoraRtcService.ɵfac = function AngularAgoraRtcService_Factory(t) { return new (t || AngularAgoraRtcService)(ɵngcc0.ɵɵinject('config')); };
AngularAgoraRtcService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: AngularAgoraRtcService, factory: function (t) { return AngularAgoraRtcService.ɵfac(t); }, providedIn: 'root' });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: AgoraConfig, decorators: [{
                type: Inject,
                args: ['config']
            }] }]; }, null); })();
    return AngularAgoraRtcService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var AgoraLocalComponent = /** @class */ (function () {
    function AgoraLocalComponent(agoraService) {
        this.agoraService = agoraService;
        this.activeCall = false;
        this.audioEnabled = true;
        this.videoEnabled = true;
        this.remoteCalls = [];
        this.agoraService.createClient();
    }
    /**
     * @return {?}
     */
    AgoraLocalComponent.prototype.startCall = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.activeCall = true;
        this.agoraService.client.join(null, '1000', null, function (uid) {
            _this.localStream = _this.agoraService.createStream(uid, true, null, null, true, false);
            _this.localStream.setVideoProfile('720p_3');
            _this.subscribeToStreams();
        });
    };
    /**
     * @return {?}
     */
    AgoraLocalComponent.prototype.subscribeToStreams = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.localStream.on("accessAllowed", function () {
            console.log("accessAllowed");
        });
        // The user has denied access to the camera and mic.
        this.localStream.on("accessDenied", function () {
            console.log("accessDenied");
        });
        this.localStream.init(function () {
            console.log("getUserMedia successfully");
            _this.localStream.play('agora_local');
            _this.agoraService.client.publish(_this.localStream, function (err) {
                console.log("Publish local stream error: " + err);
            });
            _this.agoraService.client.on('stream-published', function (evt) {
                console.log("Publish local stream successfully");
            });
        }, function (err) {
            console.log("getUserMedia failed", err);
        });
        this.agoraService.client.on('error', function (err) {
            console.log("Got error msg:", err.reason);
            if (err.reason === 'DYNAMIC_KEY_TIMEOUT') {
                _this.agoraService.client.renewChannelKey("", function () {
                    console.log("Renew channel key successfully");
                }, function (err) {
                    console.log("Renew channel key failed: ", err);
                });
            }
        });
        this.agoraService.client.on('stream-added', function (evt) {
            /** @type {?} */
            var stream = evt.stream;
            _this.agoraService.client.subscribe(stream, function (err) {
                console.log("Subscribe stream failed", err);
            });
        });
        this.agoraService.client.on('stream-subscribed', function (evt) {
            /** @type {?} */
            var stream = evt.stream;
            if (!_this.remoteCalls.includes("agora_remote" + stream.getId()))
                _this.remoteCalls.push("agora_remote" + stream.getId());
            setTimeout(function () { return stream.play("agora_remote" + stream.getId()); }, 2000);
        });
        this.agoraService.client.on('stream-removed', function (evt) {
            /** @type {?} */
            var stream = evt.stream;
            stream.stop();
            _this.remoteCalls = _this.remoteCalls.filter(function (call) { return call !== "#agora_remote" + stream.getId(); });
            console.log("Remote stream is removed " + stream.getId());
        });
        this.agoraService.client.on('peer-leave', function (evt) {
            /** @type {?} */
            var stream = evt.stream;
            if (stream) {
                stream.stop();
                _this.remoteCalls = _this.remoteCalls.filter(function (call) { return call === "#agora_remote" + stream.getId(); });
                console.log(evt.uid + " left from this channel");
            }
        });
    };
    /**
     * @return {?}
     */
    AgoraLocalComponent.prototype.leave = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.agoraService.client.leave(function () {
            _this.activeCall = false;
            document.getElementById('agora_local').innerHTML = "";
            console.log("Leavel channel successfully");
        }, function (err) {
            console.log("Leave channel failed");
        });
    };
    /**
     * @return {?}
     */
    AgoraLocalComponent.prototype.toggleAudio = /**
     * @return {?}
     */
    function () {
        this.audioEnabled = !this.audioEnabled;
        if (this.audioEnabled)
            this.localStream.enableAudio();
        else
            this.localStream.disableAudio();
    };
    /**
     * @return {?}
     */
    AgoraLocalComponent.prototype.toggleVideo = /**
     * @return {?}
     */
    function () {
        this.videoEnabled = !this.videoEnabled;
        if (this.videoEnabled)
            this.localStream.enableVideo();
        else
            this.localStream.disableVideo();
    };
    /** @nocollapse */
    AgoraLocalComponent.ctorParameters = function () { return [
        { type: AngularAgoraRtcService }
    ]; };
AgoraLocalComponent.ɵfac = function AgoraLocalComponent_Factory(t) { return new (t || AgoraLocalComponent)(ɵngcc0.ɵɵdirectiveInject(AngularAgoraRtcService)); };
AgoraLocalComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AgoraLocalComponent, selectors: [["agora-rtc"]], decls: 8, vars: 3, consts: [[1, "video-container"], [1, "call-container"], [1, "agora_local"], [1, "video-buttons"], ["class", "startCall material-icons", 3, "click", 4, "ngIf"], [4, "ngIf"], ["id", "agora_local"], ["class", "agora_remote", 3, "id", 4, "ngFor", "ngForOf"], [1, "startCall", "material-icons", 3, "click"], ["class", "endCall material-icons", 3, "click", 4, "ngIf"], ["class", "mic material-icons", 3, "click", 4, "ngIf"], [1, "endCall", "material-icons", 3, "click"], [1, "mic", "material-icons", 3, "click"], [1, "agora_remote", 3, "id"]], template: function AgoraLocalComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelement(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_i_4_Template, 2, 0, "i", 4);
        ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_Template, 6, 5, "ng-container", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(6, "div", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(7, AgoraLocalComponent_div_7_Template, 1, 1, "div", 7);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.activeCall);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.activeCall);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.remoteCalls);
    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf], styles: ["@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p[_ngcontent-%COMP%]{font-family:Lato}.video-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local[_ngcontent-%COMP%]{height:250px;width:250px;top:-28px}.agora_remote[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons[_ngcontent-%COMP%]{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.endCall[_ngcontent-%COMP%]{color:red}.mic[_ngcontent-%COMP%], .startCall[_ngcontent-%COMP%]{color:#fff}"] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AgoraLocalComponent, [{
        type: Component,
        args: [{
                selector: 'agora-rtc',
                template: "<div class=\"video-container\">\n\t<div class=\"call-container\">\n\t</div>\n\t<div class=\"agora_local\">\n\t\t<div class=\"video-buttons\">\n\t\t\t<i class=\"startCall material-icons\" (click)=\"startCall()\" *ngIf=\"!activeCall\">videocam</i>\n\t\t\t<ng-container *ngIf=\"activeCall\">\n\t\t\t\t<i class=\"endCall material-icons\" (click)=\"leave()\" *ngIf=\"activeCall\">phone</i>\n\n\t\t\t\t<i class=\"mic material-icons\" (click)=\"toggleAudio()\" *ngIf=\"audioEnabled\">mic</i>\n\t\t\t\t<i class=\"mic material-icons\" (click)=\"toggleAudio()\" *ngIf=\"!audioEnabled\">mic_off</i>\n\n\t\t\t\t<i class=\"mic material-icons\" (click)=\"toggleVideo()\" *ngIf=\"videoEnabled\">videocam</i>\n\t\t\t\t<i class=\"mic material-icons\" (click)=\"toggleVideo()\" *ngIf=\"!videoEnabled\">videocam_off</i>\n\t\t\t</ng-container>\n\t\t</div>\n\t\t<div id=\"agora_local\"></div>\n\t</div>\n\t<div class=\"agora_remote\" *ngFor=\"let remote of remoteCalls\" [id]=\"remote\">\n\n\t</div>\n</div>",
                styles: ["@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p{font-family:Lato}.video-container{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local{height:250px;width:250px;top:-28px}.agora_remote{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons i{cursor:pointer}.endCall{color:red}.mic,.startCall{color:#fff}"]
            }]
    }], function () { return [{ type: AngularAgoraRtcService }]; }, null); })();
    return AgoraLocalComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var AngularAgoraRtcModule = /** @class */ (function () {
    function AngularAgoraRtcModule() {
    }
    /**
     * @param {?} config
     * @return {?}
     */
    AngularAgoraRtcModule.forRoot = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        return {
            ngModule: AngularAgoraRtcModule,
            providers: [AngularAgoraRtcService, { provide: 'config', useValue: config }]
        };
    };
AngularAgoraRtcModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularAgoraRtcModule });
AngularAgoraRtcModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularAgoraRtcModule_Factory(t) { return new (t || AngularAgoraRtcModule)(); }, imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AngularAgoraRtcModule, { declarations: function () { return [AgoraLocalComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [AgoraLocalComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [AgoraLocalComponent],
                exports: [AgoraLocalComponent]
            }]
    }], function () { return []; }, null); })();
    return AngularAgoraRtcModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var AgoraClient = /** @class */ (function () {
    function AgoraClient() {
    }
    return AgoraClient;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var Stream = /** @class */ (function () {
    function Stream() {
    }
    return Stream;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var Device = /** @class */ (function () {
    function Device() {
    }
    return Device;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { AngularAgoraRtcService, AgoraLocalComponent, AngularAgoraRtcModule, AgoraClient, Stream, Device, AgoraConfig };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1hZ29yYS1ydGMuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvQWdvcmFDb25maWcudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2FuZ3VsYXItYWdvcmEtcnRjLnNlcnZpY2UudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2Fnb3JhLWxvY2FsLmNvbXBvbmVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvYW5ndWxhci1hZ29yYS1ydGMubW9kdWxlLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9BZ29yYUNsaWVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvU3RyZWFtLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9EZXZpY2UudHMiXSwibmFtZXMiOlsiQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMiLCJBZ29yYVJUQy5nZXREZXZpY2VzIiwiQWdvcmFSVEMuY3JlYXRlQ2xpZW50IiwiQWdvcmFSVEMuY3JlYXRlU3RyZWFtIiwiQWdvcmFSVEMuTG9nZ2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUE7OztzQkFBQTtJQUVDOzs7Ozs7QUNGRDtJQWdCRSxnQ0FDNEIsTUFBa0I7UUFBbEIsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUU1QyxJQUFJLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLEVBQUU7WUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztTQUNsRDthQUFLO1lBQ0osSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ25CO0tBQ0Y7Ozs7SUFFRCx3REFBdUI7OztJQUF2QjtRQUNFLE9BQU9BLHVCQUFnQyxFQUFFLENBQUM7S0FDM0M7Ozs7SUFFTywy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QUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBQyxDQUFDO1NBQzNFLENBQUM7S0FDSCxDQUNIO3lEQWRDLFFBQVEsU0FBQztTQUNSLE9BQU8sRUFBRSwwQkFDUCxZQUFZLHNCQUNiLHNCQUNELFlBQVksRUFBRSxDQUFDLG1CQUFtQixDQUFDLHNCQUNuQyxPQUFPO0FBQUUsQ0FBQyxtQkFBbUIsQ0FBQztjQUMvQjs7Ozs7Ozs7Ozs7Z0RBQ1M7Z0NBYlY7Ozs7Ozs7QUNBQSxJQUFBOzs7c0JBQUE7SUFrQ0c7Ozs7OztBQ2xDSCxJQUFBOzs7aUJBQUE7SUF5REM7Ozs7OztBQ3pERCxJQUFBOzs7aUJBQUE7SUFLQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBZ29yYUNvbmZpZ3tcbiAgICBBcHBJRDpzdHJpbmc7XG59IiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBBZ29yYVJUQyBmcm9tICdhZ29yYS1ydGMtc2RrJztcbmltcG9ydCB7IFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQWdvcmFDb25maWcgfSBmcm9tICcuL0Fnb3JhQ29uZmlnJztcbmltcG9ydCB7IEFnb3JhQ2xpZW50IH0gZnJvbSAnLi9BZ29yYUNsaWVudCc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJBZ29yYVJ0Y1NlcnZpY2Uge1xuXG4gIHB1YmxpYyBhdWRpb0RldmljZXM6IGFueVtdO1xuICBwdWJsaWMgdmlkZW9EZXZpY2VzOiBhbnlbXTtcblxuICBwdWJsaWMgY2xpZW50OiBBZ29yYUNsaWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KCdjb25maWcnKSBwcml2YXRlIGNvbmZpZzpBZ29yYUNvbmZpZ1xuICApIHtcbiAgICBpZiAoIXRoaXMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSkge1xuICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgJ1dlYiBSVEMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH0gZWxzZXtcbiAgICAgIHRoaXMuZ2V0RGV2aWNlcygpO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCkge1xuICAgIHJldHVybiBBZ29yYVJUQy5jaGVja1N5c3RlbVJlcXVpcmVtZW50cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZXZpY2VzKCkge1xuICAgIEFnb3JhUlRDLmdldERldmljZXMoKGRldmljZXMpID0+IHtcbiAgICAgIGxldCBhdWRpb0RldmljZXMgPSBkZXZpY2VzLmZpbHRlcihkZXZpY2UgPT4ge1xuICAgICAgICByZXR1cm4gZGV2aWNlLmtpbmQgPT09ICdhdWRpb2lucHV0JyAmJiBkZXZpY2UuZGV2aWNlSWQgIT09ICdkZWZhdWx0J1xuICAgICAgfSk7XG4gICAgICBsZXQgdmlkZW9EZXZpY2VzID0gZGV2aWNlcy5maWx0ZXIoZGV2aWNlID0+IHtcbiAgICAgICAgcmV0dXJuIGRldmljZS5raW5kID09PSAndmlkZW9pbnB1dCcgJiYgZGV2aWNlLmRldmljZUlkICE9PSAnZGVmYXVsdCdcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hdWRpb0RldmljZXMgPSBhdWRpb0RldmljZXM7XG4gICAgICB0aGlzLnZpZGVvRGV2aWNlcyA9IHZpZGVvRGV2aWNlcztcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNsaWVudChtb2RlOiBzdHJpbmcgPSAnaW50ZXJvcCcpIHtcbiAgICAgdGhpcy5jbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoeyBtb2RlOiBtb2RlIH0pO1xuICAgICB0aGlzLmNsaWVudC5pbml0KHRoaXMuY29uZmlnLkFwcElEKTtcbiAgfVxuXG4gIGNyZWF0ZVN0cmVhbShzdHJlYW1JRDogYW55LCBhdWRpbzogYm9vbGVhbiwgY2FtZXJhSWQ6IHN0cmluZyA9IHRoaXMudmlkZW9EZXZpY2VzWzBdLmRldmljZUlkLCBtaWNyb3Bob25lSWQ6IHN0cmluZyA9IHRoaXMuYXVkaW9EZXZpY2VzWzBdLmRldmljZUlkLCB2aWRlbzogYm9vbGVhbiwgc2NyZWVuOiBib29sZWFuKSB7XG4gICAgcmV0dXJuIEFnb3JhUlRDLmNyZWF0ZVN0cmVhbSh7c3RyZWFtSUQsIGF1ZGlvLCBjYW1lcmFJZCwgbWljcm9waG9uZUlkLCB2aWRlbywgc2NyZWVufSk7XG4gIH1cblxuICBsb2dnZXIodHlwZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgQWdvcmFSVEMuTG9nZ2VyLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dhcm5pbmcnOlxuICAgICAgICBBZ29yYVJUQy5Mb2dnZXIud2FybmluZyhtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgQWdvcmFSVEMuTG9nZ2VyLmluZm8obWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVidWcnOlxuICAgICAgICBBZ29yYVJUQy5Mb2dnZXIuZGVidWcobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgQWdvcmFSVEMuTG9nZ2VyLmVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbmd1bGFyQWdvcmFSdGNTZXJ2aWNlIH0gZnJvbSAnLi9hbmd1bGFyLWFnb3JhLXJ0Yy5zZXJ2aWNlJztcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gJy4vU3RyZWFtJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYWdvcmEtcnRjJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwidmlkZW8tY29udGFpbmVyXCI+XG5cdDxkaXYgY2xhc3M9XCJjYWxsLWNvbnRhaW5lclwiPlxuXHQ8L2Rpdj5cblx0PGRpdiBjbGFzcz1cImFnb3JhX2xvY2FsXCI+XG5cdFx0PGRpdiBjbGFzcz1cInZpZGVvLWJ1dHRvbnNcIj5cblx0XHRcdDxpIGNsYXNzPVwic3RhcnRDYWxsIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cInN0YXJ0Q2FsbCgpXCIgKm5nSWY9XCIhYWN0aXZlQ2FsbFwiPnZpZGVvY2FtPC9pPlxuXHRcdFx0PG5nLWNvbnRhaW5lciAqbmdJZj1cImFjdGl2ZUNhbGxcIj5cblx0XHRcdFx0PGkgY2xhc3M9XCJlbmRDYWxsIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cImxlYXZlKClcIiAqbmdJZj1cImFjdGl2ZUNhbGxcIj5waG9uZTwvaT5cblxuXHRcdFx0XHQ8aSBjbGFzcz1cIm1pYyBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJ0b2dnbGVBdWRpbygpXCIgKm5nSWY9XCJhdWRpb0VuYWJsZWRcIj5taWM8L2k+XG5cdFx0XHRcdDxpIGNsYXNzPVwibWljIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cInRvZ2dsZUF1ZGlvKClcIiAqbmdJZj1cIiFhdWRpb0VuYWJsZWRcIj5taWNfb2ZmPC9pPlxuXG5cdFx0XHRcdDxpIGNsYXNzPVwibWljIG1hdGVyaWFsLWljb25zXCIgKGNsaWNrKT1cInRvZ2dsZVZpZGVvKClcIiAqbmdJZj1cInZpZGVvRW5hYmxlZFwiPnZpZGVvY2FtPC9pPlxuXHRcdFx0XHQ8aSBjbGFzcz1cIm1pYyBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJ0b2dnbGVWaWRlbygpXCIgKm5nSWY9XCIhdmlkZW9FbmFibGVkXCI+dmlkZW9jYW1fb2ZmPC9pPlxuXHRcdFx0PC9uZy1jb250YWluZXI+XG5cdFx0PC9kaXY+XG5cdFx0PGRpdiBpZD1cImFnb3JhX2xvY2FsXCI+PC9kaXY+XG5cdDwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwiYWdvcmFfcmVtb3RlXCIgKm5nRm9yPVwibGV0IHJlbW90ZSBvZiByZW1vdGVDYWxsc1wiIFtpZF09XCJyZW1vdGVcIj5cblxuXHQ8L2Rpdj5cbjwvZGl2PmAsXG4gIHN0eWxlczogW2BAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2ljb24/ZmFtaWx5PU1hdGVyaWFsK0ljb25zKTtwe2ZvbnQtZmFtaWx5OkxhdG99LnZpZGVvLWNvbnRhaW5lcntoZWlnaHQ6MTAwdmg7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2ZsZXgtZGlyZWN0aW9uOnJvdztqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5hZ29yYV9sb2NhbHtiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7aGVpZ2h0OjI1MHB4O3dpZHRoOjI1MHB4O2JvcmRlcjoxcHggc29saWQgIzAwMDttYXJnaW46OHB4fSNhZ29yYV9sb2NhbHtoZWlnaHQ6MjUwcHg7d2lkdGg6MjUwcHg7dG9wOi0yOHB4fS5hZ29yYV9yZW1vdGV7YmFja2dyb3VuZC1jb2xvcjojNDA0MDQwO2hlaWdodDoyNTBweDt3aWR0aDoyNTBweDtib3JkZXI6MXB4IHNvbGlkICMwMDA7bWFyZ2luOjhweH0udmlkZW8tYnV0dG9uc3t3aWR0aDoyNTBweDt0b3A6MjEwcHg7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXI7ei1pbmRleDo5OTl9LnZpZGVvLWJ1dHRvbnMgaXtjdXJzb3I6cG9pbnRlcn0uZW5kQ2FsbHtjb2xvcjpyZWR9Lm1pYywuc3RhcnRDYWxse2NvbG9yOiNmZmZ9YF1cbn0pXG5leHBvcnQgY2xhc3MgQWdvcmFMb2NhbENvbXBvbmVudCB7XG5cbiAgYWN0aXZlQ2FsbDogYm9vbGVhbiA9IGZhbHNlO1xuICBhdWRpb0VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICB2aWRlb0VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICBsb2NhbFN0cmVhbTogU3RyZWFtXG4gIHJlbW90ZUNhbGxzOiBhbnkgPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFnb3JhU2VydmljZTogQW5ndWxhckFnb3JhUnRjU2VydmljZVxuICApIHtcbiAgICB0aGlzLmFnb3JhU2VydmljZS5jcmVhdGVDbGllbnQoKTtcbiAgfVxuXG4gIHN0YXJ0Q2FsbCgpIHtcbiAgICB0aGlzLmFjdGl2ZUNhbGwgPSB0cnVlO1xuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5qb2luKG51bGwsICcxMDAwJywgbnVsbCwgKHVpZCkgPT4ge1xuICAgICAgdGhpcy5sb2NhbFN0cmVhbSA9IHRoaXMuYWdvcmFTZXJ2aWNlLmNyZWF0ZVN0cmVhbSh1aWQsIHRydWUsIG51bGwsIG51bGwsIHRydWUsIGZhbHNlKTtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0uc2V0VmlkZW9Qcm9maWxlKCc3MjBwXzMnKTtcbiAgICAgIHRoaXMuc3Vic2NyaWJlVG9TdHJlYW1zKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN1YnNjcmliZVRvU3RyZWFtcygpIHtcbiAgICB0aGlzLmxvY2FsU3RyZWFtLm9uKFwiYWNjZXNzQWxsb3dlZFwiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImFjY2Vzc0FsbG93ZWRcIik7XG4gICAgfSk7XG4gICAgLy8gVGhlIHVzZXIgaGFzIGRlbmllZCBhY2Nlc3MgdG8gdGhlIGNhbWVyYSBhbmQgbWljLlxuICAgIHRoaXMubG9jYWxTdHJlYW0ub24oXCJhY2Nlc3NEZW5pZWRcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJhY2Nlc3NEZW5pZWRcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxvY2FsU3RyZWFtLmluaXQoKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJnZXRVc2VyTWVkaWEgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgdGhpcy5sb2NhbFN0cmVhbS5wbGF5KCdhZ29yYV9sb2NhbCcpO1xuICAgICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50LnB1Ymxpc2godGhpcy5sb2NhbFN0cmVhbSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlB1Ymxpc2ggbG9jYWwgc3RyZWFtIGVycm9yOiBcIiArIGVycik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbignc3RyZWFtLXB1Ymxpc2hlZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQdWJsaXNoIGxvY2FsIHN0cmVhbSBzdWNjZXNzZnVsbHlcIik7XG4gICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImdldFVzZXJNZWRpYSBmYWlsZWRcIiwgZXJyKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkdvdCBlcnJvciBtc2c6XCIsIGVyci5yZWFzb24pO1xuICAgICAgaWYgKGVyci5yZWFzb24gPT09ICdEWU5BTUlDX0tFWV9USU1FT1VUJykge1xuICAgICAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQucmVuZXdDaGFubmVsS2V5KFwiXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbmV3IGNoYW5uZWwga2V5IHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVuZXcgY2hhbm5lbCBrZXkgZmFpbGVkOiBcIiwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ3N0cmVhbS1hZGRlZCcsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGV2dC5zdHJlYW07XG4gICAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQuc3Vic2NyaWJlKHN0cmVhbSwgKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlN1YnNjcmliZSBzdHJlYW0gZmFpbGVkXCIsIGVycik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbignc3RyZWFtLXN1YnNjcmliZWQnLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBldnQuc3RyZWFtO1xuICAgICAgaWYgKCF0aGlzLnJlbW90ZUNhbGxzLmluY2x1ZGVzKGBhZ29yYV9yZW1vdGUke3N0cmVhbS5nZXRJZCgpfWApKSB0aGlzLnJlbW90ZUNhbGxzLnB1c2goYGFnb3JhX3JlbW90ZSR7c3RyZWFtLmdldElkKCl9YCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHN0cmVhbS5wbGF5KGBhZ29yYV9yZW1vdGUke3N0cmVhbS5nZXRJZCgpfWApLCAyMDAwKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbignc3RyZWFtLXJlbW92ZWQnLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBldnQuc3RyZWFtO1xuICAgICAgc3RyZWFtLnN0b3AoKTtcbiAgICAgIHRoaXMucmVtb3RlQ2FsbHMgPSB0aGlzLnJlbW90ZUNhbGxzLmZpbHRlcihjYWxsID0+IGNhbGwgIT09IGAjYWdvcmFfcmVtb3RlJHtzdHJlYW0uZ2V0SWQoKX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGBSZW1vdGUgc3RyZWFtIGlzIHJlbW92ZWQgJHtzdHJlYW0uZ2V0SWQoKX1gKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5vbigncGVlci1sZWF2ZScsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGV2dC5zdHJlYW07XG4gICAgICBpZiAoc3RyZWFtKSB7XG4gICAgICAgIHN0cmVhbS5zdG9wKCk7XG4gICAgICAgIHRoaXMucmVtb3RlQ2FsbHMgPSB0aGlzLnJlbW90ZUNhbGxzLmZpbHRlcihjYWxsID0+IGNhbGwgPT09IGAjYWdvcmFfcmVtb3RlJHtzdHJlYW0uZ2V0SWQoKX1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7ZXZ0LnVpZH0gbGVmdCBmcm9tIHRoaXMgY2hhbm5lbGApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGxlYXZlKCkge1xuICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5sZWF2ZSgoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2ZUNhbGwgPSBmYWxzZTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZ29yYV9sb2NhbCcpLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBjb25zb2xlLmxvZyhcIkxlYXZlbCBjaGFubmVsIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICB9LCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkxlYXZlIGNoYW5uZWwgZmFpbGVkXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQXVkaW8oKSB7XG4gICAgdGhpcy5hdWRpb0VuYWJsZWQgPSAhdGhpcy5hdWRpb0VuYWJsZWQ7XG4gICAgaWYgKHRoaXMuYXVkaW9FbmFibGVkKSB0aGlzLmxvY2FsU3RyZWFtLmVuYWJsZUF1ZGlvKCk7XG4gICAgZWxzZSB0aGlzLmxvY2FsU3RyZWFtLmRpc2FibGVBdWRpbygpO1xuICB9XG5cbiAgdG9nZ2xlVmlkZW8oKSB7XG4gICAgdGhpcy52aWRlb0VuYWJsZWQgPSAhdGhpcy52aWRlb0VuYWJsZWQ7XG4gICAgaWYgKHRoaXMudmlkZW9FbmFibGVkKSB0aGlzLmxvY2FsU3RyZWFtLmVuYWJsZVZpZGVvKCk7XG4gICAgZWxzZSB0aGlzLmxvY2FsU3RyZWFtLmRpc2FibGVWaWRlbygpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBZ29yYUxvY2FsQ29tcG9uZW50IH0gZnJvbSAnLi9hZ29yYS1sb2NhbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQWdvcmFDb25maWcgfSBmcm9tICcuL0Fnb3JhQ29uZmlnJztcbmltcG9ydCB7IEFuZ3VsYXJBZ29yYVJ0Y1NlcnZpY2UgfSBmcm9tICcuL2FuZ3VsYXItYWdvcmEtcnRjLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtBZ29yYUxvY2FsQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW0Fnb3JhTG9jYWxDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJBZ29yYVJ0Y01vZHVsZSB7XG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZzogQWdvcmFDb25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJze1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogQW5ndWxhckFnb3JhUnRjTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbQW5ndWxhckFnb3JhUnRjU2VydmljZSwge3Byb3ZpZGU6ICdjb25maWcnLCB1c2VWYWx1ZTogY29uZmlnfV1cbiAgICB9O1xuICB9XG4gfVxuIiwiZXhwb3J0IGNsYXNzIEFnb3JhQ2xpZW50IHtcbiAgICBhZXNNb2RlOiBzdHJpbmc7XG4gICAgYWVzcGFzc3dvcmQ6IHN0cmluZztcbiAgICBjb25maWdQdWJsaXNoZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBkaXNhYmxlRHVhbFN0cmVhbTogYW55OyAvLyBmdW5jdGlvblxuICAgIGVuYWJsZUR1YWxTdHJlYW06IGFueTsgLy8gZnVuY3Rpb25cbiAgICBnYXRld2F5Q2xpZW50OiB7fTsgLy8gYWRkIG9iamVjdFxuICAgIGhpZ2hTdHJlYW06IGFueTsgLy8gPyB0eXBlXG4gICAgaGlnaFN0cmVhbVN0YXRlOiBudW1iZXI7XG4gICAgaW5pdDogYW55OyAvLyBmdW5jdGlvblxuICAgIGlzRHVhbFN0cmVhbTogYm9vbGVhbjtcbiAgICBqb2luOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAga2V5OiBhbnk7IC8vID8gc3RyaW5nXG4gICAgbGVhdmU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBsb3dTdHJlYW06IGFueTsgLy8gP1xuICAgIGxvd1N0cmVhbVBhcmFtZXRlcjogYW55IC8vID9cbiAgICBsb3dTdHJlYW1TdGF0ZTogbnVtYmVyO1xuICAgIG9uOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgcHJveHlTZXJ2ZXI6IGFueTsgLy8gP1xuICAgIHB1Ymxpc2g6IGFueTsgLy8gZnVuY3Rpb25cbiAgICByZW5ld0NoYW5uZWxLZXk6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRFbmNyeXB0aW9uTW9kZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldEVuY3J5cHRpb25TZWNyZXQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRMaXZlVHJhbnNjb2Rpbmc6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRMb3dTdHJlYW1QYXJhbWV0ZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRQcm94eVNlcnZlcjogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFJlbW90ZVZpZGVvU3RyZWFtVHlwZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFR1cm5TZXJ2ZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzdGFydExpdmVTdHJlYW1pbmc6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzdG9wTGl2ZVN0cmVhbWluZzogYW55OyAvLyBmdW5jdGlvblxuICAgIHN1YnNjcmliZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHR1cm5TZXJ2ZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICB1bnB1Ymxpc2g6IGFueTsgLy8gZnVuY3Rpb25cbiAgICB1bnN1YnNjcmliZTogYW55OyAvLyBmdW5jdGlvblxuICB9IiwiZXhwb3J0IGNsYXNzIFN0cmVhbSB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogYW55OyAvLyBmdW5jdGlvblxuICAgIGF1ZGlvOiBib29sZWFuO1xuICAgIGF1ZGlvRW5hYmxlZDogYm9vbGVhbjtcbiAgICBhdWRpb0xldmVsSGVscGVyOiBhbnkgLy8gP1xuICAgIGF1eF9zdHJlYW06IGFueTsgLy8gP1xuICAgIGNsb3NlOiBhbnk7IC8vIGZ1bmN0aW9uIFxuICAgIGRpc2FibGVBdWRpbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGRpc2FibGVWaWRlbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGRpc3BhdGNoRXZlbnQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBkaXNwYXRjaFNvY2tldEV2ZW50OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZGlzcGF0Y2hlcjogYW55OyAvLyBldmVudCBsaXN0ZW5lclxuICAgIGVuYWJsZUF1ZGlvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZW5hYmxlVmlkZW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBnZXRBdHRyaWJ1dGVzOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZ2V0QXVkaW9MZXZlbDogYW55OyAvLyBmdW5jdGlvblxuICAgIGdldElkOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZ2V0U3RhdHM6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBoYXNBdWRpbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGhhc1NjcmVlbjogYW55OyAvLyBmdW5jdGlvblxuICAgIGhhc1ZpZGVvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaW5pdDogYW55OyAvLyBmdW5jdGlvblxuICAgIGluaXRpYWxpemVkOiBib29sZWFuO1xuICAgIGlzQXVkaW9PbjogYW55OyAvLyBmdW5jdGlvblxuICAgIGlzVmlkZW9PbjogYW55OyAvLyBmdW5jdGlvblxuICAgIGxvY2FsOiBib29sZWFuO1xuICAgIGxvd1N0cmVhbTogYW55OyAvLz9cbiAgICBtaXJyb3I6IGJvb2xlYW47XG4gICAgbXV0ZUF1ZGlvOiBhbnk7IC8vID9cbiAgICBtdXRlVmlkZW86IGFueTsgLy8gP1xuICAgIG9uOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgb25DbG9zZTogYW55IC8vID9cbiAgICBwYXJhbXM6XG4gICAgICAgIHsgc3RyZWFtSUQ6IG51bWJlciwgYXVkaW86IGJvb2xlYW4sIGNhbWVyYUlkOiBzdHJpbmcsIG1pY3JvcGhvbmVJZDogc3RyaW5nLCB2aWRlbzogYm9vbGVhbiB9XG4gICAgcGxheTogYW55OyAvLyBmdW5jdGlvblxuICAgIHBsYXllcjogYW55OyAvLyA/XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogYW55OyAvLyBmdW5jdGlvblxuICAgIHNjcmVlbjogYm9vbGVhbjtcbiAgICBzY3JlZW5BdHRyaWJ1dGVzOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBtYXhGcjogbnVtYmVyLCBtaW5GcjogbnVtYmVyIH1cbiAgICBzZXRTY3JlZW5Qcm9maWxlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9CaXRSYXRlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9GcmFtZVJhdGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb1Byb2ZpbGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb1Byb2ZpbGVDdXN0b206IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRWaWRlb1Byb2ZpbGVDdXN0b21QbHVzOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9SZXNvbHV0aW9uOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc3RvcDogYW55OyAvLyBmdW5jdGlvblxuICAgIHN0cmVhbUxhbnlsIC8vID9cbiAgICBzdHJlYW1JZDogbnVtYmVyO1xuICAgIHVubXV0ZUF1ZGlvOiBhbnk7IC8vID9cbiAgICB1bm11dGVWaWRlbzogYW55OyAvLyA/XG4gICAgdXJsOiBhbnk7IC8vP1xuICAgIHZpZGVvOiBib29sZWFuO1xuICAgIHZpZGVvRW5hYmxlZDogYm9vbGVhbjtcbiAgICB2aWRlb0hlaWdodDogbnVtYmVyO1xuICAgIHZpZGVvU2l6ZTogQXJyYXk8bnVtYmVyPlxuICAgIHZpZGVvV2lkdGg6IG51bWJlcjtcbn0iLCJleHBvcnQgY2xhc3MgRGV2aWNlIHtcbiAgICBkZXZpY2VJZDpzdHJpbmc7XG4gICAgZ3JvdXBJZDpzdHJpbmc7XG4gICAga2luZDpzdHJpbmc7XG4gICAgbGFiZWw6c3RyaW5nO1xufSJdfQ==